{% extends "base.html" %}

{% block title %}

Training plan 2019

{% endblock %}



{% block content %}
  <h2>Training plan 2019</h2>
  <br>
  <canvas id="myChart" width="1000" height="200"></canvas>

  <script>
    // Global parameters:
    // do not resize the chart canvas when its container does (keep at 600x400px)
    Chart.defaults.global.responsive = false;
     // define the chart data
     var chartData = {
       labels : [{% for m in n %}
                  "{{m.Week}}",
                 {% endfor %}],
       datasets : [{
           label: '{{ legend }}',
           fill: true,
           lineTension: 0.1,
           backgroundColor: "rgba(75,192,192,0.4)",
           borderColor: "rgba(75,192,192,1)",
           borderCapStyle: 'butt',
           borderDash: [],
           borderDashOffset: 0.0,
           borderJoinStyle: 'miter',
           pointBorderColor: "rgba(75,192,192,1)",
           pointBackgroundColor: "#fff",
           pointBorderWidth: 1,
           pointHoverRadius: 5,
           pointHoverBackgroundColor: "rgba(75,192,192,1)",
           pointHoverBorderColor: "rgba(220,220,220,1)",
           pointHoverBorderWidth: 2,
           pointRadius: 1,
           pointHitRadius: 10,
           data : [{% for m in n %}
                     {{ m.TSSplan }},
                   {% endfor %}],
           spanGaps: false
      }]
     }

     // get chart canvas
     var ctx = document.getElementById("myChart").getContext("2d");
      // create the chart using the chart canvas
     var myChart = new Chart(ctx, {
       type: 'bar',
       data: chartData,
      });
    </script>
  <br>
  <div class="container">
    <div class="row">
      <div class="col-md-8">
        <table class="table table-striped" style="width: 800px">
          <thead>
            <tr>
              <th scope="col" align="center"># of Week</th>
              <th scope="col">Starting date</th>
              <th scope="col">Training Phase</th>
              <th scope="col">Planned TSS</th>
              <th scope="col">Completed TSS</th>
            </tr>
          </thead>
          <tbody>
        
        {% for m in n: %}   
                {% if 0 < (d - m.Date).days < 7: %}
                   <tr class="table-primary">
                {% else: %}
                   <tr>
                {% endif %}

            
              <th scope="row" align="center">{{ m.Week  }}</th>
              <td align="center">{{  m.Date  }}</td>
             
             {% if m.TrainingPhase == 'Base 1': %}
              <td align="center" style="background:SkyBlue">{{  m.TrainingPhase  }}</td>
             {% elif m.TrainingPhase == 'Base 2': %}
              <td align="center" style="background:DeepSkyBlue">{{  m.TrainingPhase  }}</td>
             {% elif m.TrainingPhase == 'Base 3': %}
              <td align="center" style="background:DodgerBlue">{{  m.TrainingPhase  }}</td>
             {% elif m.TrainingPhase == 'Build 1': %}
              <td align="center" style="background:LimeGreen">{{  m.TrainingPhase  }}</td>
             {% elif m.TrainingPhase == 'Build 2': %}
              <td align="center" style="background:Green">{{  m.TrainingPhase  }}</td>
             {% elif m.TrainingPhase == 'Peak': %}
              <td align="center" style="background:DarkOrange">{{  m.TrainingPhase  }}</td>
             {% elif m.TrainingPhase == 'Race': %}
              <td align="center" style="background:OrangeRed">{{  m.TrainingPhase  }}</td>
             {% else: %}
              <td align="center" >{{  m.TrainingPhase  }}</td>
             {% endif %}


              <td align="center">{{ m.TSSplan  }}</td>
              <td align="center">{{ m.TSScompl  }}</td>
            </tr>
        {% endfor %}    
       
          </tbody>
        </table>
        <a href="{{ url_for('create_plan') }}"><button type="button" class="btn btn-primary">Create new training plan</button></a>
      </div>
      <div class="col-md-4">
          <form action="{{ url_for('plan') }}" method='POST'>
          {% for m in form %}     
            {{ m.label }}
              {{ m() }} 
              <br>
          {%    endfor %}    
          <br>
          <button type="submit" class="btn btn-warning">Update</button>
          </form>

      </div>
    </div>
  </div>
        


  		

{% endblock %}
